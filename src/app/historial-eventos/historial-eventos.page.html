<ion-header [translucent]="true" class="custom-header">
  <ion-toolbar class="custom-toolbar" style="background-color: black;">
    <ion-buttons slot="start" *ngIf="userType === 'estudiante'">
      <ion-button (click)="openMissionsModal()">
        <ion-icon slot="icon-only" name="ribbon-outline" style="color: white;"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title style="color: white">Historial de Eventos</ion-title>
    <ion-buttons slot="end">
      <ion-button [routerLink]="['/notifications']" style="position: relative;">
        <ion-icon slot="icon-only" name="notifications-outline" style="color: white;"></ion-icon>
        <!-- Badge para mostrar el número de notificaciones -->
        <ion-badge *ngIf="unreadNotificationsCount > 0" color="danger" style="position: absolute; top: -5px; right: -5px;">
          {{ unreadNotificationsCount }}
        </ion-badge>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="content-center">
  <!-- Sección: Acreditados -->
  <ion-list style="background-color: white;" *ngIf="eventosAcreditados.length > 0">
    <ion-item-divider class="divider">Eventos Acreditados</ion-item-divider>
    <div *ngFor="let evento of eventosAcreditados" class="event-card">
      <div class="event-container">
        <ion-thumbnail class="event-thumbnail">
          <img [src]="evento.imagen" alt="Imagen del evento" class="event-image">
        </ion-thumbnail>
        <div class="event-details">
          <h2>{{ evento.titulo }}</h2>
          <p>Fecha de acreditación: {{ evento.fechaVerificacion | date:'dd/MM/yyyy' }}</p>
        </div>
        <div class="event-badge badge-acreditado">Acreditado</div>
      </div>
    </div>
  </ion-list>

  <!-- Sección: No Acreditados -->
  <ion-list style="background-color: white;" *ngIf="eventosNoAcreditados.length > 0">
    <ion-item-divider class="divider">Eventos No Acreditados</ion-item-divider>
    <div *ngFor="let evento of eventosNoAcreditados" class="event-card">
      <div class="event-container">
        <ion-thumbnail class="event-thumbnail">
          <img [src]="evento.imagen" alt="Imagen del evento" class="event-image">
        </ion-thumbnail>
        <div class="event-details">
          <h2>{{ evento.titulo }}</h2>
          <p>Fecha de término: {{ evento.fecha_termino | date:'dd/MM/yyyy' }}</p>
        </div>
        <div class="event-badge badge-no-acreditado">No Acreditado</div>
      </div>
    </div>
  </ion-list>

  <!-- Sección: Penalizados -->
  <ion-list style="background-color: white;" *ngIf="eventosPenalizados.length > 0">
    <ion-item-divider class="divider">Eventos Penalizados</ion-item-divider>
    <div *ngFor="let evento of eventosPenalizados" class="event-card">
      <div class="event-container">
        <ion-thumbnail class="event-thumbnail">
          <img [src]="evento.imagen" alt="Imagen del evento" class="event-image">
        </ion-thumbnail>
        <div class="event-details">
          <h2>{{ evento.titulo }}</h2>
          <p>Fecha de término: {{ evento.fecha_termino | date:'dd/MM/yyyy' }}</p>
        </div>
        <div class="event-badge badge-penalizado">Penalizado</div>
      </div>
    </div>
  </ion-list>
</ion-content>

<app-tab-usuario></app-tab-usuario>
